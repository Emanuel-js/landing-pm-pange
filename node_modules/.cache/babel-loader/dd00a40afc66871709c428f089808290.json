{"ast":null,"code":"import { __assign } from 'tslib';\nimport { Presence } from '../types.js';\nimport { elementDragControls } from '../../../gestures/drag/VisualElementDragControls.js';\nimport { createCrossfader } from './crossfader.js';\n\nfunction layoutStack() {\n  var stack = new Set();\n  var state = {\n    leadIsExiting: false\n  };\n\n  var prevState = __assign({}, state);\n\n  var prevValues;\n  var prevViewportBox;\n  var prevDragCursor;\n  var crossfader = createCrossfader();\n  var needsCrossfadeAnimation = false;\n\n  function getFollowViewportBox() {\n    return state.follow ? state.follow.prevViewportBox : prevViewportBox;\n  }\n\n  function getFollowLayout() {\n    var _a;\n\n    return (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getLayoutState().layout;\n  }\n\n  return {\n    add: function (element) {\n      element.setCrossfader(crossfader);\n      stack.add(element);\n      /**\r\n       * Hydrate new element with previous drag position if we have one\r\n       */\n\n      if (prevDragCursor) element.prevDragCursor = prevDragCursor;\n      if (!state.lead) state.lead = element;\n    },\n    remove: function (element) {\n      stack.delete(element);\n    },\n    getLead: function () {\n      return state.lead;\n    },\n    updateSnapshot: function () {\n      if (!state.lead) return;\n      prevValues = crossfader.isActive() ? crossfader.getLatestValues() : state.lead.getLatestValues();\n      prevViewportBox = state.lead.prevViewportBox;\n      var dragControls = elementDragControls.get(state.lead);\n\n      if (dragControls && dragControls.isDragging) {\n        prevDragCursor = dragControls.cursorProgress;\n      }\n    },\n    clearSnapshot: function () {\n      prevDragCursor = prevViewportBox = undefined;\n    },\n    updateLeadAndFollow: function () {\n      var _a;\n\n      prevState = __assign({}, state);\n      var lead;\n      var follow;\n      var order = Array.from(stack);\n\n      for (var i = order.length; i--; i >= 0) {\n        var element = order[i];\n        if (lead) follow !== null && follow !== void 0 ? follow : follow = element;\n        lead !== null && lead !== void 0 ? lead : lead = element;\n        if (lead && follow) break;\n      }\n\n      state.lead = lead;\n      state.follow = follow;\n      state.leadIsExiting = ((_a = state.lead) === null || _a === void 0 ? void 0 : _a.presence) === Presence.Exiting;\n      crossfader.setOptions({\n        lead: lead,\n        follow: follow,\n        prevValues: prevValues,\n        crossfadeOpacity: (follow === null || follow === void 0 ? void 0 : follow.isPresenceRoot) || (lead === null || lead === void 0 ? void 0 : lead.isPresenceRoot)\n      });\n\n      if ( // Don't crossfade if we've just animated back from lead and switched the\n      // old follow to the new lead.\n      state.lead !== prevState.follow && (prevState.lead !== state.lead || prevState.leadIsExiting !== state.leadIsExiting)) {\n        needsCrossfadeAnimation = true;\n      }\n    },\n    animate: function (child, shouldCrossfade) {\n      var _a;\n\n      if (shouldCrossfade === void 0) {\n        shouldCrossfade = false;\n      }\n\n      if (child === state.lead) {\n        if (shouldCrossfade) {\n          /**\r\n           * Point a lead to itself in case it was previously pointing\r\n           * to a different visual element\r\n           */\n          child.pointTo(state.lead);\n        } else {\n          child.setVisibility(true);\n        }\n\n        var config = {};\n        var prevParent = (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getProjectionParent();\n\n        if (prevParent) {\n          /**\r\n           * We'll use this to determine if the element or its layoutId has been reparented.\r\n           */\n          config.prevParent = prevParent;\n        }\n\n        if (child.presence === Presence.Entering) {\n          config.originBox = getFollowViewportBox();\n        } else if (child.presence === Presence.Exiting) {\n          config.targetBox = getFollowLayout();\n        }\n\n        if (needsCrossfadeAnimation) {\n          needsCrossfadeAnimation = false;\n          var transition = child.getDefaultTransition();\n          child.presence === Presence.Entering ? crossfader.toLead(transition) : crossfader.fromLead(transition);\n        }\n\n        child.notifyLayoutReady(config);\n      } else {\n        if (shouldCrossfade) {\n          state.lead && child.pointTo(state.lead);\n        } else {\n          child.setVisibility(false);\n        }\n      }\n    }\n  };\n}\n\nexport { layoutStack };","map":{"version":3,"names":["__assign","Presence","elementDragControls","createCrossfader","layoutStack","stack","Set","state","leadIsExiting","prevState","prevValues","prevViewportBox","prevDragCursor","crossfader","needsCrossfadeAnimation","getFollowViewportBox","follow","getFollowLayout","_a","getLayoutState","layout","add","element","setCrossfader","lead","remove","delete","getLead","updateSnapshot","isActive","getLatestValues","dragControls","get","isDragging","cursorProgress","clearSnapshot","undefined","updateLeadAndFollow","order","Array","from","i","length","presence","Exiting","setOptions","crossfadeOpacity","isPresenceRoot","animate","child","shouldCrossfade","pointTo","setVisibility","config","prevParent","getProjectionParent","Entering","originBox","targetBox","transition","getDefaultTransition","toLead","fromLead","notifyLayoutReady"],"sources":["E:/Projects/project/project mangement dashbord/landing-pm-pange/node_modules/framer-motion/dist/es/components/AnimateSharedLayout/utils/stack.js"],"sourcesContent":["import { __assign } from 'tslib';\r\nimport { Presence } from '../types.js';\r\nimport { elementDragControls } from '../../../gestures/drag/VisualElementDragControls.js';\r\nimport { createCrossfader } from './crossfader.js';\r\n\r\nfunction layoutStack() {\r\n    var stack = new Set();\r\n    var state = { leadIsExiting: false };\r\n    var prevState = __assign({}, state);\r\n    var prevValues;\r\n    var prevViewportBox;\r\n    var prevDragCursor;\r\n    var crossfader = createCrossfader();\r\n    var needsCrossfadeAnimation = false;\r\n    function getFollowViewportBox() {\r\n        return state.follow ? state.follow.prevViewportBox : prevViewportBox;\r\n    }\r\n    function getFollowLayout() {\r\n        var _a;\r\n        return (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getLayoutState().layout;\r\n    }\r\n    return {\r\n        add: function (element) {\r\n            element.setCrossfader(crossfader);\r\n            stack.add(element);\r\n            /**\r\n             * Hydrate new element with previous drag position if we have one\r\n             */\r\n            if (prevDragCursor)\r\n                element.prevDragCursor = prevDragCursor;\r\n            if (!state.lead)\r\n                state.lead = element;\r\n        },\r\n        remove: function (element) {\r\n            stack.delete(element);\r\n        },\r\n        getLead: function () { return state.lead; },\r\n        updateSnapshot: function () {\r\n            if (!state.lead)\r\n                return;\r\n            prevValues = crossfader.isActive()\r\n                ? crossfader.getLatestValues()\r\n                : state.lead.getLatestValues();\r\n            prevViewportBox = state.lead.prevViewportBox;\r\n            var dragControls = elementDragControls.get(state.lead);\r\n            if (dragControls && dragControls.isDragging) {\r\n                prevDragCursor = dragControls.cursorProgress;\r\n            }\r\n        },\r\n        clearSnapshot: function () {\r\n            prevDragCursor = prevViewportBox = undefined;\r\n        },\r\n        updateLeadAndFollow: function () {\r\n            var _a;\r\n            prevState = __assign({}, state);\r\n            var lead;\r\n            var follow;\r\n            var order = Array.from(stack);\r\n            for (var i = order.length; i--; i >= 0) {\r\n                var element = order[i];\r\n                if (lead)\r\n                    follow !== null && follow !== void 0 ? follow : (follow = element);\r\n                lead !== null && lead !== void 0 ? lead : (lead = element);\r\n                if (lead && follow)\r\n                    break;\r\n            }\r\n            state.lead = lead;\r\n            state.follow = follow;\r\n            state.leadIsExiting = ((_a = state.lead) === null || _a === void 0 ? void 0 : _a.presence) === Presence.Exiting;\r\n            crossfader.setOptions({\r\n                lead: lead,\r\n                follow: follow,\r\n                prevValues: prevValues,\r\n                crossfadeOpacity: (follow === null || follow === void 0 ? void 0 : follow.isPresenceRoot) || (lead === null || lead === void 0 ? void 0 : lead.isPresenceRoot),\r\n            });\r\n            if (\r\n            // Don't crossfade if we've just animated back from lead and switched the\r\n            // old follow to the new lead.\r\n            state.lead !== prevState.follow &&\r\n                (prevState.lead !== state.lead ||\r\n                    prevState.leadIsExiting !== state.leadIsExiting)) {\r\n                needsCrossfadeAnimation = true;\r\n            }\r\n        },\r\n        animate: function (child, shouldCrossfade) {\r\n            var _a;\r\n            if (shouldCrossfade === void 0) { shouldCrossfade = false; }\r\n            if (child === state.lead) {\r\n                if (shouldCrossfade) {\r\n                    /**\r\n                     * Point a lead to itself in case it was previously pointing\r\n                     * to a different visual element\r\n                     */\r\n                    child.pointTo(state.lead);\r\n                }\r\n                else {\r\n                    child.setVisibility(true);\r\n                }\r\n                var config = {};\r\n                var prevParent = (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getProjectionParent();\r\n                if (prevParent) {\r\n                    /**\r\n                     * We'll use this to determine if the element or its layoutId has been reparented.\r\n                     */\r\n                    config.prevParent = prevParent;\r\n                }\r\n                if (child.presence === Presence.Entering) {\r\n                    config.originBox = getFollowViewportBox();\r\n                }\r\n                else if (child.presence === Presence.Exiting) {\r\n                    config.targetBox = getFollowLayout();\r\n                }\r\n                if (needsCrossfadeAnimation) {\r\n                    needsCrossfadeAnimation = false;\r\n                    var transition = child.getDefaultTransition();\r\n                    child.presence === Presence.Entering\r\n                        ? crossfader.toLead(transition)\r\n                        : crossfader.fromLead(transition);\r\n                }\r\n                child.notifyLayoutReady(config);\r\n            }\r\n            else {\r\n                if (shouldCrossfade) {\r\n                    state.lead && child.pointTo(state.lead);\r\n                }\r\n                else {\r\n                    child.setVisibility(false);\r\n                }\r\n            }\r\n        },\r\n    };\r\n}\r\n\r\nexport { layoutStack };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}